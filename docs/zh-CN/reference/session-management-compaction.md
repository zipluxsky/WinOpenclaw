---
read_when:
  - ä½ éœ€è¦è°ƒè¯•ä¼šè¯ IDã€è®°å½• JSONL æˆ– sessions.json å­—æ®µ
  - ä½ æ­£åœ¨æ›´æ”¹è‡ªåŠ¨å‹ç¼©è¡Œä¸ºæˆ–æ·»åŠ "å‹ç¼©å‰"å†…åŠ¡å¤„ç†
  - ä½ æƒ³å®ç°è®°å¿†åˆ·æ–°æˆ–é™é»˜ç³»ç»Ÿå›åˆ
summary: æ·±å…¥äº†è§£ï¼šä¼šè¯å­˜å‚¨ + è®°å½•ã€ç”Ÿå‘½å‘¨æœŸå’Œï¼ˆè‡ªåŠ¨ï¼‰å‹ç¼©å†…éƒ¨æœºåˆ¶
title: ä¼šè¯ç®¡ç†æ·±å…¥äº†è§£
x-i18n:
  generated_at: "2026-02-03T07:54:38Z"
  model: claude-opus-4-5
  provider: pi
  source_hash: bf3715770ba634363933f6038117b6a91af11c62f5191aaaf97e6bce099bc120
  source_path: reference/session-management-compaction.md
  workflow: 15
---

# ä¼šè¯ç®¡ç†ä¸å‹ç¼©ï¼ˆæ·±å…¥äº†è§£ï¼‰

æœ¬æ–‡æ¡£è§£é‡Š OpenClaw å¦‚ä½•ç«¯åˆ°ç«¯ç®¡ç†ä¼šè¯ï¼š

- **ä¼šè¯è·¯ç”±**ï¼ˆå…¥ç«™æ¶ˆæ¯å¦‚ä½•æ˜ å°„åˆ° `sessionKey`ï¼‰
- **ä¼šè¯å­˜å‚¨**ï¼ˆ`sessions.json`ï¼‰åŠå…¶è·Ÿè¸ªçš„å†…å®¹
- **è®°å½•æŒä¹…åŒ–**ï¼ˆ`*.jsonl`ï¼‰åŠå…¶ç»“æ„
- **è®°å½•æ¸…ç†**ï¼ˆè¿è¡Œå‰çš„æä¾›å•†ç‰¹å®šä¿®å¤ï¼‰
- **ä¸Šä¸‹æ–‡é™åˆ¶**ï¼ˆä¸Šä¸‹æ–‡çª—å£ vs è·Ÿè¸ªçš„ token æ•°ï¼‰
- **å‹ç¼©**ï¼ˆæ‰‹åŠ¨ + è‡ªåŠ¨å‹ç¼©ï¼‰ä»¥åŠåœ¨ä½•å¤„æŒ‚æ¥å‹ç¼©å‰å·¥ä½œ
- **é™é»˜å†…åŠ¡å¤„ç†**ï¼ˆä¾‹å¦‚ä¸åº”äº§ç”Ÿç”¨æˆ·å¯è§è¾“å‡ºçš„è®°å¿†å†™å…¥ï¼‰

å¦‚æœä½ æƒ³å…ˆäº†è§£æ›´é«˜å±‚æ¬¡çš„æ¦‚è¿°ï¼Œè¯·ä»ä»¥ä¸‹å†…å®¹å¼€å§‹ï¼š

- [/concepts/session](/concepts/session)
- [/concepts/compaction](/concepts/compaction)
- [/concepts/session-pruning](/concepts/session-pruning)
- [/reference/transcript-hygiene](/reference/transcript-hygiene)

---

## äº‹å®æ¥æºï¼šGateway ç½‘å…³

OpenClaw å›´ç»•ä¸€ä¸ªæ‹¥æœ‰ä¼šè¯çŠ¶æ€çš„å•ä¸€ **Gateway ç½‘å…³è¿›ç¨‹**è®¾è®¡ã€‚

- UIï¼ˆmacOS åº”ç”¨ã€web æ§åˆ¶ UIã€TUIï¼‰åº”è¯¥å‘ Gateway ç½‘å…³æŸ¥è¯¢ä¼šè¯åˆ—è¡¨å’Œ token è®¡æ•°ã€‚
- åœ¨è¿œç¨‹æ¨¡å¼ä¸‹ï¼Œä¼šè¯æ–‡ä»¶åœ¨è¿œç¨‹ä¸»æœºä¸Šï¼›"æ£€æŸ¥ä½ çš„æœ¬åœ° Mac æ–‡ä»¶"ä¸ä¼šåæ˜  Gateway ç½‘å…³æ­£åœ¨ä½¿ç”¨çš„å†…å®¹ã€‚

---

## ä¸¤ä¸ªæŒä¹…åŒ–å±‚

OpenClaw åœ¨ä¸¤ä¸ªå±‚ä¸­æŒä¹…åŒ–ä¼šè¯ï¼š

1. **ä¼šè¯å­˜å‚¨ï¼ˆ`sessions.json`ï¼‰**
   - é”®/å€¼æ˜ å°„ï¼š`sessionKey -> SessionEntry`
   - å°å‹ã€å¯å˜ã€å¯å®‰å…¨ç¼–è¾‘ï¼ˆæˆ–åˆ é™¤æ¡ç›®ï¼‰
   - è·Ÿè¸ªä¼šè¯å…ƒæ•°æ®ï¼ˆå½“å‰ä¼šè¯ IDã€æœ€åæ´»åŠ¨æ—¶é—´ã€å¼€å…³ã€token è®¡æ•°å™¨ç­‰ï¼‰

2. **è®°å½•ï¼ˆ`<sessionId>.jsonl`ï¼‰**
   - å…·æœ‰æ ‘å½¢ç»“æ„çš„ä»…è¿½åŠ è®°å½•ï¼ˆæ¡ç›®æœ‰ `id` + `parentId`ï¼‰
   - å­˜å‚¨å®é™…å¯¹è¯ + å·¥å…·è°ƒç”¨ + å‹ç¼©æ‘˜è¦
   - ç”¨äºä¸ºåç»­å›åˆé‡å»ºæ¨¡å‹ä¸Šä¸‹æ–‡

---

## ç£ç›˜ä¸Šçš„ä½ç½®

åœ¨ Gateway ç½‘å…³ä¸»æœºä¸Šï¼Œæ¯ä¸ªæ™ºèƒ½ä½“ï¼š

- å­˜å‚¨ï¼š`~/.openclaw/agents/<agentId>/sessions/sessions.json`
- è®°å½•ï¼š`~/.openclaw/agents/<agentId>/sessions/<sessionId>.jsonl`
  - Telegram è¯é¢˜ä¼šè¯ï¼š`.../<sessionId>-topic-<threadId>.jsonl`

OpenClaw é€šè¿‡ `src/config/sessions.ts` è§£æè¿™äº›ä½ç½®ã€‚

---

## ä¼šè¯é”®ï¼ˆ`sessionKey`ï¼‰

`sessionKey` æ ‡è¯†ä½ æ‰€åœ¨çš„*å“ªä¸ªå¯¹è¯æ¡¶*ï¼ˆè·¯ç”± + éš”ç¦»ï¼‰ã€‚

å¸¸è§æ¨¡å¼ï¼š

- ä¸»è¦/ç›´æ¥èŠå¤©ï¼ˆæ¯ä¸ªæ™ºèƒ½ä½“ï¼‰ï¼š`agent:<agentId>:<mainKey>`ï¼ˆé»˜è®¤ `main`ï¼‰
- ç¾¤ç»„ï¼š`agent:<agentId>:<channel>:group:<id>`
- æˆ¿é—´/é¢‘é“ï¼ˆDiscord/Slackï¼‰ï¼š`agent:<agentId>:<channel>:channel:<id>` æˆ– `...:room:<id>`
- å®šæ—¶ä»»åŠ¡ï¼š`cron:<job.id>`
- Webhookï¼š`hook:<uuid>`ï¼ˆé™¤éè¢«è¦†ç›–ï¼‰

è§„èŒƒè§„åˆ™è®°å½•åœ¨ [/concepts/session](/concepts/session)ã€‚

---

## ä¼šè¯ IDï¼ˆ`sessionId`ï¼‰

æ¯ä¸ª `sessionKey` æŒ‡å‘ä¸€ä¸ªå½“å‰çš„ `sessionId`ï¼ˆç»§ç»­å¯¹è¯çš„è®°å½•æ–‡ä»¶ï¼‰ã€‚

ç»éªŒæ³•åˆ™ï¼š

- **é‡ç½®**ï¼ˆ`/new`ã€`/reset`ï¼‰ä¸ºè¯¥ `sessionKey` åˆ›å»ºä¸€ä¸ªæ–°çš„ `sessionId`ã€‚
- **æ¯æ—¥é‡ç½®**ï¼ˆé»˜è®¤ Gateway ç½‘å…³ä¸»æœºæœ¬åœ°æ—¶é—´å‡Œæ™¨ 4:00ï¼‰åœ¨é‡ç½®è¾¹ç•Œåçš„ä¸‹ä¸€æ¡æ¶ˆæ¯æ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„ `sessionId`ã€‚
- **ç©ºé—²è¿‡æœŸ**ï¼ˆ`session.reset.idleMinutes` æˆ–æ—§ç‰ˆ `session.idleMinutes`ï¼‰å½“æ¶ˆæ¯åœ¨ç©ºé—²çª—å£ååˆ°è¾¾æ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„ `sessionId`ã€‚å½“åŒæ—¶é…ç½®äº†æ¯æ—¥å’Œç©ºé—²æ—¶ï¼Œä»¥å…ˆè¿‡æœŸè€…ä¸ºå‡†ã€‚

å®ç°ç»†èŠ‚ï¼šå†³ç­–å‘ç”Ÿåœ¨ `src/auto-reply/reply/session.ts` çš„ `initSessionState()` ä¸­ã€‚

---

## ä¼šè¯å­˜å‚¨æ¨¡å¼ï¼ˆ`sessions.json`ï¼‰

å­˜å‚¨çš„å€¼ç±»å‹æ˜¯ `src/config/sessions.ts` ä¸­çš„ `SessionEntry`ã€‚

å…³é”®å­—æ®µï¼ˆä¸å®Œæ•´ï¼‰ï¼š

- `sessionId`ï¼šå½“å‰è®°å½• IDï¼ˆæ–‡ä»¶åä»æ­¤æ´¾ç”Ÿï¼Œé™¤éè®¾ç½®äº† `sessionFile`ï¼‰
- `updatedAt`ï¼šæœ€åæ´»åŠ¨æ—¶é—´æˆ³
- `sessionFile`ï¼šå¯é€‰çš„æ˜¾å¼è®°å½•è·¯å¾„è¦†ç›–
- `chatType`ï¼š`direct | group | room`ï¼ˆå¸®åŠ© UI å’Œå‘é€ç­–ç•¥ï¼‰
- `provider`ã€`subject`ã€`room`ã€`space`ã€`displayName`ï¼šç¾¤ç»„/é¢‘é“æ ‡ç­¾çš„å…ƒæ•°æ®
- å¼€å…³ï¼š
  - `thinkingLevel`ã€`verboseLevel`ã€`reasoningLevel`ã€`elevatedLevel`
  - `sendPolicy`ï¼ˆæ¯ä¼šè¯è¦†ç›–ï¼‰
- æ¨¡å‹é€‰æ‹©ï¼š
  - `providerOverride`ã€`modelOverride`ã€`authProfileOverride`
- Token è®¡æ•°å™¨ï¼ˆå°½åŠ›è€Œä¸º/ä¾èµ–æä¾›å•†ï¼‰ï¼š
  - `inputTokens`ã€`outputTokens`ã€`totalTokens`ã€`contextTokens`
- `compactionCount`ï¼šæ­¤ä¼šè¯é”®å®Œæˆè‡ªåŠ¨å‹ç¼©çš„æ¬¡æ•°
- `memoryFlushAt`ï¼šæœ€åä¸€æ¬¡å‹ç¼©å‰è®°å¿†åˆ·æ–°çš„æ—¶é—´æˆ³
- `memoryFlushCompactionCount`ï¼šæœ€åä¸€æ¬¡åˆ·æ–°è¿è¡Œæ—¶çš„å‹ç¼©è®¡æ•°

å­˜å‚¨å¯ä»¥å®‰å…¨ç¼–è¾‘ï¼Œä½† Gateway ç½‘å…³æ˜¯æƒå¨ï¼šå®ƒå¯èƒ½ä¼šåœ¨ä¼šè¯è¿è¡Œæ—¶é‡å†™æˆ–é‡æ–°æ°´åˆæ¡ç›®ã€‚

---

## è®°å½•ç»“æ„ï¼ˆ`*.jsonl`ï¼‰

è®°å½•ç”± `@mariozechner/pi-coding-agent` çš„ `SessionManager` ç®¡ç†ã€‚

æ–‡ä»¶æ˜¯ JSONL æ ¼å¼ï¼š

- ç¬¬ä¸€è¡Œï¼šä¼šè¯å¤´ï¼ˆ`type: "session"`ï¼ŒåŒ…æ‹¬ `id`ã€`cwd`ã€`timestamp`ã€å¯é€‰çš„ `parentSession`ï¼‰
- ç„¶åï¼šå¸¦æœ‰ `id` + `parentId` çš„ä¼šè¯æ¡ç›®ï¼ˆæ ‘å½¢ç»“æ„ï¼‰

å€¼å¾—æ³¨æ„çš„æ¡ç›®ç±»å‹ï¼š

- `message`ï¼šç”¨æˆ·/åŠ©æ‰‹/å·¥å…·ç»“æœæ¶ˆæ¯
- `custom_message`ï¼šæ‰©å±•æ³¨å…¥çš„æ¶ˆæ¯ï¼Œ*ç¡®å®*è¿›å…¥æ¨¡å‹ä¸Šä¸‹æ–‡ï¼ˆå¯ä»¥ä» UI éšè—ï¼‰
- `custom`ï¼š*ä¸*è¿›å…¥æ¨¡å‹ä¸Šä¸‹æ–‡çš„æ‰©å±•çŠ¶æ€
- `compaction`ï¼šæŒä¹…åŒ–çš„å‹ç¼©æ‘˜è¦ï¼Œå¸¦æœ‰ `firstKeptEntryId` å’Œ `tokensBefore`
- `branch_summary`ï¼šå¯¼èˆªæ ‘åˆ†æ”¯æ—¶çš„æŒä¹…åŒ–æ‘˜è¦

OpenClaw æœ‰æ„**ä¸**"ä¿®å¤"è®°å½•ï¼›Gateway ç½‘å…³ä½¿ç”¨ `SessionManager` æ¥è¯»/å†™å®ƒä»¬ã€‚

---

## ä¸Šä¸‹æ–‡çª—å£ vs è·Ÿè¸ªçš„ token

ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µå¾ˆé‡è¦ï¼š

1. **æ¨¡å‹ä¸Šä¸‹æ–‡çª—å£**ï¼šæ¯ä¸ªæ¨¡å‹çš„ç¡¬ä¸Šé™ï¼ˆæ¨¡å‹å¯è§çš„ tokenï¼‰
2. **ä¼šè¯å­˜å‚¨è®¡æ•°å™¨**ï¼šå†™å…¥ `sessions.json` çš„æ»šåŠ¨ç»Ÿè®¡ï¼ˆç”¨äº /status å’Œä»ªè¡¨æ¿ï¼‰

å¦‚æœä½ åœ¨è°ƒæ•´é™åˆ¶ï¼š

- ä¸Šä¸‹æ–‡çª—å£æ¥è‡ªæ¨¡å‹ç›®å½•ï¼ˆå¯ä»¥é€šè¿‡é…ç½®è¦†ç›–ï¼‰ã€‚
- å­˜å‚¨ä¸­çš„ `contextTokens` æ˜¯è¿è¡Œæ—¶ä¼°è®¡/æŠ¥å‘Šå€¼ï¼›ä¸è¦å°†å…¶è§†ä¸ºä¸¥æ ¼ä¿è¯ã€‚

æ›´å¤šä¿¡æ¯ï¼Œå‚è§ [/token-use](/reference/token-use)ã€‚

---

## å‹ç¼©ï¼šå®ƒæ˜¯ä»€ä¹ˆ

å‹ç¼©å°†è¾ƒæ—§çš„å¯¹è¯æ€»ç»“ä¸ºè®°å½•ä¸­çš„æŒä¹…åŒ– `compaction` æ¡ç›®ï¼Œå¹¶ä¿æŒæœ€è¿‘çš„æ¶ˆæ¯ä¸å˜ã€‚

å‹ç¼©åï¼Œæœªæ¥çš„å›åˆä¼šçœ‹åˆ°ï¼š

- å‹ç¼©æ‘˜è¦
- `firstKeptEntryId` ä¹‹åçš„æ¶ˆæ¯

å‹ç¼©æ˜¯**æŒä¹…åŒ–çš„**ï¼ˆä¸ä¼šè¯ä¿®å‰ªä¸åŒï¼‰ã€‚å‚è§ [/concepts/session-pruning](/concepts/session-pruning)ã€‚

---

## è‡ªåŠ¨å‹ç¼©ä½•æ—¶å‘ç”Ÿï¼ˆPi è¿è¡Œæ—¶ï¼‰

åœ¨åµŒå…¥å¼ Pi æ™ºèƒ½ä½“ä¸­ï¼Œè‡ªåŠ¨å‹ç¼©åœ¨ä¸¤ç§æƒ…å†µä¸‹è§¦å‘ï¼š

1. **æº¢å‡ºæ¢å¤**ï¼šæ¨¡å‹è¿”å›ä¸Šä¸‹æ–‡æº¢å‡ºé”™è¯¯ â†’ å‹ç¼© â†’ é‡è¯•ã€‚
2. **é˜ˆå€¼ç»´æŠ¤**ï¼šåœ¨æˆåŠŸçš„å›åˆåï¼Œå½“ï¼š

`contextTokens > contextWindow - reserveTokens`

å…¶ä¸­ï¼š

- `contextWindow` æ˜¯æ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£
- `reserveTokens` æ˜¯ä¸ºæç¤º + ä¸‹ä¸€ä¸ªæ¨¡å‹è¾“å‡ºä¿ç•™çš„ç©ºé—´

è¿™äº›æ˜¯ Pi è¿è¡Œæ—¶è¯­ä¹‰ï¼ˆOpenClaw æ¶ˆè´¹äº‹ä»¶ï¼Œä½† Pi å†³å®šä½•æ—¶å‹ç¼©ï¼‰ã€‚

---

## å‹ç¼©è®¾ç½®ï¼ˆ`reserveTokens`ã€`keepRecentTokens`ï¼‰

Pi çš„å‹ç¼©è®¾ç½®ä½äº Pi è®¾ç½®ä¸­ï¼š

```json5
{
  compaction: {
    enabled: true,
    reserveTokens: 16384,
    keepRecentTokens: 20000,
  },
}
```

OpenClaw è¿˜ä¸ºåµŒå…¥å¼è¿è¡Œå¼ºåˆ¶æ‰§è¡Œå®‰å…¨ä¸‹é™ï¼š

- å¦‚æœ `compaction.reserveTokens < reserveTokensFloor`ï¼ŒOpenClaw ä¼šæå‡å®ƒã€‚
- é»˜è®¤ä¸‹é™æ˜¯ `20000` ä¸ª tokenã€‚
- è®¾ç½® `agents.defaults.compaction.reserveTokensFloor: 0` ä»¥ç¦ç”¨ä¸‹é™ã€‚
- å¦‚æœå®ƒå·²ç»æ›´é«˜ï¼ŒOpenClaw ä¸ä¼šæ”¹å˜å®ƒã€‚

åŸå› ï¼šä¸ºå‹ç¼©å˜å¾—ä¸å¯é¿å…ä¹‹å‰çš„å¤šå›åˆ"å†…åŠ¡å¤„ç†"ï¼ˆå¦‚è®°å¿†å†™å…¥ï¼‰ç•™å‡ºè¶³å¤Ÿçš„ç©ºé—´ã€‚

å®ç°ï¼š`src/agents/pi-settings.ts` ä¸­çš„ `ensurePiCompactionReserveTokens()`ï¼ˆä» `src/agents/pi-embedded-runner.ts` è°ƒç”¨ï¼‰ã€‚

---

## ç”¨æˆ·å¯è§çš„ç•Œé¢

ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è§‚å¯Ÿå‹ç¼©å’Œä¼šè¯çŠ¶æ€ï¼š

- `/status`ï¼ˆåœ¨ä»»ä½•èŠå¤©ä¼šè¯ä¸­ï¼‰
- `openclaw status`ï¼ˆCLIï¼‰
- `openclaw sessions` / `sessions --json`
- è¯¦ç»†æ¨¡å¼ï¼š`ğŸ§¹ Auto-compaction complete` + å‹ç¼©è®¡æ•°

---

## é™é»˜å†…åŠ¡å¤„ç†ï¼ˆ`NO_REPLY`ï¼‰

OpenClaw æ”¯æŒç”¨äºåå°ä»»åŠ¡çš„"é™é»˜"å›åˆï¼Œç”¨æˆ·ä¸åº”è¯¥çœ‹åˆ°ä¸­é—´è¾“å‡ºã€‚

çº¦å®šï¼š

- åŠ©æ‰‹ä»¥ `NO_REPLY` å¼€å§‹å…¶è¾“å‡ºï¼Œè¡¨ç¤º"ä¸è¦å‘ç”¨æˆ·å‘é€å›å¤"ã€‚
- OpenClaw åœ¨æŠ•é€’å±‚å‰¥ç¦»/æŠ‘åˆ¶æ­¤å†…å®¹ã€‚

ä» `2026.1.10` å¼€å§‹ï¼Œå½“éƒ¨åˆ†å—ä»¥ `NO_REPLY` å¼€å¤´æ—¶ï¼ŒOpenClaw è¿˜ä¼šæŠ‘åˆ¶**è‰ç¨¿/æ‰“å­—æµå¼è¾“å‡º**ï¼Œå› æ­¤é™é»˜æ“ä½œä¸ä¼šåœ¨å›åˆä¸­é€”æ³„æ¼éƒ¨åˆ†è¾“å‡ºã€‚

---

## å‹ç¼©å‰"è®°å¿†åˆ·æ–°"ï¼ˆå·²å®ç°ï¼‰

ç›®æ ‡ï¼šåœ¨è‡ªåŠ¨å‹ç¼©å‘ç”Ÿä¹‹å‰ï¼Œè¿è¡Œä¸€ä¸ªé™é»˜çš„æ™ºèƒ½ä½“å›åˆï¼Œå°†æŒä¹…çŠ¶æ€å†™å…¥ç£ç›˜ï¼ˆä¾‹å¦‚æ™ºèƒ½ä½“å·¥ä½œç©ºé—´ä¸­çš„ `memory/YYYY-MM-DD.md`ï¼‰ï¼Œè¿™æ ·å‹ç¼©å°±ä¸ä¼šæ“¦é™¤å…³é”®ä¸Šä¸‹æ–‡ã€‚

OpenClaw ä½¿ç”¨**é¢„é˜ˆå€¼åˆ·æ–°**æ–¹æ³•ï¼š

1. ç›‘æ§ä¼šè¯ä¸Šä¸‹æ–‡ä½¿ç”¨æƒ…å†µã€‚
2. å½“å®ƒè¶Šè¿‡"è½¯é˜ˆå€¼"ï¼ˆä½äº Pi çš„å‹ç¼©é˜ˆå€¼ï¼‰æ—¶ï¼Œå‘æ™ºèƒ½ä½“è¿è¡Œä¸€ä¸ªé™é»˜çš„"ç°åœ¨å†™å…¥è®°å¿†"æŒ‡ä»¤ã€‚
3. ä½¿ç”¨ `NO_REPLY` ä»¥ä¾¿ç”¨æˆ·çœ‹ä¸åˆ°ä»»ä½•å†…å®¹ã€‚

é…ç½®ï¼ˆ`agents.defaults.compaction.memoryFlush`ï¼‰ï¼š

- `enabled`ï¼ˆé»˜è®¤ï¼š`true`ï¼‰
- `softThresholdTokens`ï¼ˆé»˜è®¤ï¼š`4000`ï¼‰
- `prompt`ï¼ˆåˆ·æ–°å›åˆçš„ç”¨æˆ·æ¶ˆæ¯ï¼‰
- `systemPrompt`ï¼ˆä¸ºåˆ·æ–°å›åˆé™„åŠ çš„é¢å¤–ç³»ç»Ÿæç¤ºï¼‰

è¯´æ˜ï¼š

- é»˜è®¤çš„æç¤º/ç³»ç»Ÿæç¤ºåŒ…å« `NO_REPLY` æç¤ºä»¥æŠ‘åˆ¶æŠ•é€’ã€‚
- åˆ·æ–°æ¯ä¸ªå‹ç¼©å‘¨æœŸè¿è¡Œä¸€æ¬¡ï¼ˆåœ¨ `sessions.json` ä¸­è·Ÿè¸ªï¼‰ã€‚
- åˆ·æ–°ä»…å¯¹åµŒå…¥å¼ Pi ä¼šè¯è¿è¡Œï¼ˆCLI åç«¯è·³è¿‡å®ƒï¼‰ã€‚
- å½“ä¼šè¯å·¥ä½œç©ºé—´æ˜¯åªè¯»æ—¶ï¼ˆ`workspaceAccess: "ro"` æˆ– `"none"`ï¼‰ï¼Œåˆ·æ–°ä¼šè¢«è·³è¿‡ã€‚
- å‚è§[è®°å¿†](/concepts/memory)äº†è§£å·¥ä½œç©ºé—´æ–‡ä»¶å¸ƒå±€å’Œå†™å…¥æ¨¡å¼ã€‚

Pi è¿˜åœ¨æ‰©å±• API ä¸­å…¬å¼€äº† `session_before_compact` é’©å­ï¼Œä½† OpenClaw çš„åˆ·æ–°é€»è¾‘ç›®å‰ä½äº Gateway ç½‘å…³ç«¯ã€‚

---

## æ•…éšœæ’é™¤æ£€æŸ¥æ¸…å•

- ä¼šè¯é”®é”™è¯¯ï¼Ÿä» [/concepts/session](/concepts/session) å¼€å§‹ï¼Œå¹¶åœ¨ `/status` ä¸­ç¡®è®¤ `sessionKey`ã€‚
- å­˜å‚¨ vs è®°å½•ä¸åŒ¹é…ï¼Ÿä» `openclaw status` ç¡®è®¤ Gateway ç½‘å…³ä¸»æœºå’Œå­˜å‚¨è·¯å¾„ã€‚
- å‹ç¼©è¿‡äºé¢‘ç¹ï¼Ÿæ£€æŸ¥ï¼š
  - æ¨¡å‹ä¸Šä¸‹æ–‡çª—å£ï¼ˆå¤ªå°ï¼‰
  - å‹ç¼©è®¾ç½®ï¼ˆ`reserveTokens` å¯¹äºæ¨¡å‹çª—å£æ¥è¯´å¤ªé«˜ä¼šå¯¼è‡´æ›´æ—©çš„å‹ç¼©ï¼‰
  - å·¥å…·ç»“æœè†¨èƒ€ï¼šå¯ç”¨/è°ƒæ•´ä¼šè¯ä¿®å‰ª
- é™é»˜å›åˆæ³„æ¼ï¼Ÿç¡®è®¤å›å¤ä»¥ `NO_REPLY`ï¼ˆç²¾ç¡® tokenï¼‰å¼€å¤´ï¼Œå¹¶ä¸”ä½ ä½¿ç”¨çš„æ„å»ºç‰ˆæœ¬åŒ…å«æµå¼è¾“å‡ºæŠ‘åˆ¶ä¿®å¤ã€‚
